<!DOCTYPE html>
<html>
<head>
    <title>chrome浏览器安全扫描插件</title>

    <link rel="stylesheet" href="../css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../css/live.min.css" type="text/css" />
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/general.min.js"></script>
    <script src="../js/self.js"></script>


</head>
<body>
    <ul class="nav nav-pills">
        <!--<li><img src="../image/baidu-logo.png" /></li>-->
        <li><b>chrome浏览器安全扫描插件</b></li>
        <li class="active"><a href="#" id="capture"><i class="icon-ok-circle"></i>捕捉</a></li>
        <li><a href="#" id="rawView"><i class="icon-ban-circle"></i>Raw</a></li>
        <li><a href="#" id="clearAll"><i class="icon-remove"></i>清除</a></li>
        <li><a href="#myModal" role="button" id="settings" data-toggle="modal"><i class="icon-wrench"></i>设置</a></li>
        <li><a href="#" id="sendMail"><i class="icon-envelope"></i>联系我们</a></li>
        <li><a href="#" id="help"><i class="icon-question-sign"></i>帮助</a></li>
    </ul>
    <p id="test" status=2>zhaodaichong</p>
    <table id="test_table">
        <tbody>
            <tr id=1 status=x></tr>
            <tr id=2 status=y></tr>
            <tr id=3 status=z></tr>
        </tbody>
    </table>
    <table id="responseList" class="table table-hover table-bordered table-striped task-list-table">
        <thead>
            <tr>
                <th style="width: 20px; text-align: center;">#</th>
                <th style="width: 40px; text-align: center;">Method</th>
                <th style="width: 38px; text-align: center;">Status</th>
                <th style="width: 320px;">Url</th>
                
                <th style="width: 60px; text-align: center;">扫描结果</th>
                <th style="width: 40px; text-align: center;">操作</th>
                <th style="width: 60px; text-align: center;">详细信息</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div>
        <p>
            chrome浏览器安全插件基于<a href="http://scan.baidu.com">扫雷平台</a>技术。
        </p>
        <span id="test">x</span>
    </div>


</body>

<script>
function sleep(delay) {
        var start = new Date().getTime();
        while (new Date().getTime() < start + delay);
}

for( var i=0; i<5; i++ ){
    var t = "";
    var none;
    if(i==3){
        t += '<tr id=tid_' + i + ' ' + 'n=' + null + '>';
    }else{
        t += '<tr id=tid_' + i + ' >';
    }
    t += '<td style="width:40px;">' + i + "<\/td>";
    t += '<td style="max-width: 40px; text-align: center;overflow: hidden; white-space: nowrap;text-overflow:ellipsis;">' + "GET" + "<\/td>";
    t += '<td style="width:40px;"><span id="status" class="badge badge-important result-badge">检测中<\/span><\/td>';
    t += '<td style="width:40px;">' + "http://www.baiddu.com" + '<\/td>';
    t += "<\/tr>";

    //$("#responseList > tbody tr").first().remove();
    $("#responseList > tbody:last").append(t);
}
var trCollection = $("#test_table > tbody tr");
console.log(trCollection.length);
alert(!!trCollection.eq(3).attr("n"));

(function(){
        
    var trCollection = $("#responseList > tbody tr");
    console.log(trCollection.length);
    for(var i = 0; i<trCollection.length; i++){
            /*
            if(trCollection[i].id=="tid_3"){

                $('#responseList > tbody > tr[id='+trCollection[i].id+'][status=2] > td > span[id="status"]').text('2个漏洞').removeClass('badge-important').addClass('badge-error');
            }
            */
            //$("#responseList > tbody tr").first().remove();
            //$("#responseList > tbody:last").append(t);
            console.log(i+'|'+trCollection.eq(i).attr('id'));
            trCollection.eq(i).attr("status",i);
    }

    })();
</script>
</html>
